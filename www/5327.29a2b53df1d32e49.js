"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5327],{2957:(te,k,g)=>{g.d(k,{G:()=>w});const w={FRONT:"front",BACK:"back"}},2726:(te,k,g)=>{g.d(k,{Uw:()=>l,fo:()=>I});var u=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var C=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(C||{});class s extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const q=n=>{var e,t,o,a,r;const d=n.CapacitorCustomPlatform||null,i=n.Capacitor||{},h=i.Plugins=i.Plugins||{},f=n.CapacitorPlatforms,Z=(null===(e=null==f?void 0:f.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==d?d.name:(n=>{var e,t;return null!=n&&n.androidBridge?"android":null!==(t=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n)),de=(null===(t=null==f?void 0:f.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==Z()),fe=(null===(o=null==f?void 0:f.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||(m=>{const p=V.get(m);return!!(null!=p&&p.platforms.has(Z())||ae(m))}),ae=(null===(a=null==f?void 0:f.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(m=>{var p;return null===(p=i.PluginHeaders)||void 0===p?void 0:p.find($=>$.name===m)}),V=new Map,ve=(null===(r=null==f?void 0:f.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((m,p={})=>{const $=V.get(m);if($)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),$.proxy;const T=Z(),R=ae(m);let L;const Pe=function(){var v=(0,u.Z)(function*(){return!L&&T in p?L=L="function"==typeof p[T]?yield p[T]():p[T]:null!==d&&!L&&"web"in p&&(L=L="function"==typeof p.web?yield p.web():p.web),L});return function(){return v.apply(this,arguments)}}(),Y=v=>{let b;const O=(...x)=>{const D=Pe().then(A=>{const j=((v,b)=>{var O,x;if(!R){if(v)return null===(x=v[b])||void 0===x?void 0:x.bind(v);throw new s(`"${m}" plugin is not implemented on ${T}`,C.Unimplemented)}{const D=null==R?void 0:R.methods.find(A=>b===A.name);if(D)return"promise"===D.rtype?A=>i.nativePromise(m,b.toString(),A):(A,j)=>i.nativeCallback(m,b.toString(),A,j);if(v)return null===(O=v[b])||void 0===O?void 0:O.bind(v)}})(A,v);if(j){const N=j(...x);return b=null==N?void 0:N.remove,N}throw new s(`"${m}.${v}()" is not implemented on ${T}`,C.Unimplemented)});return"addListener"===v&&(D.remove=(0,u.Z)(function*(){return b()})),D};return O.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:v,writable:!1,configurable:!1}),O},ce=Y("addListener"),le=Y("removeListener"),we=(v,b)=>{const O=ce({eventName:v},b),x=function(){var A=(0,u.Z)(function*(){const j=yield O;le({eventName:v,callbackId:j},b)});return function(){return A.apply(this,arguments)}}(),D=new Promise(A=>O.then(()=>A({remove:x})));return D.remove=(0,u.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield x()}),D},ee=new Proxy({},{get(v,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?we:ce;case"removeListener":return le;default:return Y(b)}}});return h[m]=ee,V.set(m,{name:m,proxy:ee,platforms:new Set([...Object.keys(p),...R?[T]:[]])}),ee});return i.convertFileSrc||(i.convertFileSrc=m=>m),i.getPlatform=Z,i.handleError=m=>n.console.error(m),i.isNativePlatform=de,i.isPluginAvailable=fe,i.pluginMethodNoop=(m,p,$)=>Promise.reject(`${$} does not have an implementation of "${p}".`),i.registerPlugin=ve,i.Exception=s,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},M=(n=>n.Capacitor=q(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),I=M.registerPlugin;class l{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var o=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const d=function(){var h=(0,u.Z)(function*(){return o.removeListener(e,t)});return function(){return h.apply(this,arguments)}}(),i=Promise.resolve({remove:d});return Object.defineProperty(i,"remove",{value:(h=(0,u.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield d()}),function(){return h.apply(this,arguments)})}),i;var h}removeAllListeners(){var e=this;return(0,u.Z)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t){const o=this.listeners[e];o&&o.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new M.Exception(e,C.Unimplemented)}unavailable(e="not available"){return new M.Exception(e,C.Unavailable)}removeListener(e,t){var o=this;return(0,u.Z)(function*(){const a=o.listeners[e];if(!a)return;const r=a.indexOf(t);o.listeners[e].splice(r,1),o.listeners[e].length||o.removeWindowListener(o.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const _=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),c=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class P extends l{getCookies(){return(0,u.Z)(function*(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[a,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=c(a).trim(),r=c(r).trim(),t[a]=r}),t})()}setCookie(e){return(0,u.Z)(function*(){try{const t=_(e.key),o=_(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),d=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${a}; path=${r}; ${d};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,u.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,u.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,u.Z)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}I("CapacitorCookies",{web:()=>new P});const y=function(){var n=(0,u.Z)(function*(e){return new Promise((t,o)=>{const a=new FileReader;a.onload=()=>{const r=a.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},a.onerror=r=>o(r),a.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class X extends l{request(e){return(0,u.Z)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,r,d)=>(a[r]=n[e[d]],a),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[d,i]of Object.entries(n.data||{}))r.set(d,i);t.body=r.toString()}else if(a.includes("multipart/form-data")){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((i,h)=>{r.append(h,i)});else for(const i of Object.keys(n.data))r.append(i,n.data[i]);t.body=r;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(a.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),o=((n,e=!0)=>n?Object.entries(n).reduce((o,a)=>{const[r,d]=a;let i,h;return Array.isArray(d)?(h="",d.forEach(f=>{i=e?encodeURIComponent(f):f,h+=`${r}=${i}&`}),h.slice(0,-1)):(i=e?encodeURIComponent(d):d,h=`${r}=${i}`),`${o}&${h}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=o?`${e.url}?${o}`:e.url,r=yield fetch(a,t),d=r.headers.get("content-type")||"";let h,f,{responseType:i="text"}=r.ok?e:{};switch(d.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":f=yield r.blob(),h=yield y(f);break;case"json":h=yield r.json();break;default:h=yield r.text()}const H={};return r.headers.forEach((Z,z)=>{H[z]=Z}),{data:h,headers:H,status:r.status,url:r.url}})()}get(e){var t=this;return(0,u.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,u.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,u.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,u.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,u.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}I("CapacitorHttp",{web:()=>new X})},5327:(te,k,g)=>{g.r(k),g.d(k,{ScannerqrPageModule:()=>ie});var u=g(6814),W=g(6223),w=g(6728),U=g(2058),B=g(5861),ne=g(2726);g(2957);const C=(0,ne.fo)("BarcodeScanner",{web:()=>g.e(7606).then(g.bind(g,7606)).then(l=>new l.BarcodeScannerWeb)});var s=g(2029),G=g(2999),q=g(2296),Q=g(617);const I=[{path:"",component:(()=>{var l;class S{constructor(c,P){var E;this.router=c,this.djangoApi=P,this.scanActivate=!1,this.id=0,this.mensaje="";const y=null===(E=this.router.getCurrentNavigation())||void 0===E?void 0:E.extras.state;y&&y.id&&(this.id=y.id)}ngOnInit(){}checkPermission(){return(0,B.Z)(function*(){return new Promise(function(){var c=(0,B.Z)(function*(P,E){const y=yield C.checkPermission({force:!0});y.granted?P(!0):y.denied&&(C.openAppSettings(),P(!1))});return function(P,E){return c.apply(this,arguments)}}())})()}startScanner(){var c=this;return(0,B.Z)(function*(){if(yield c.checkPermission()){c.scanActivate=!0,C.hideBackground();const E=yield C.startScan();if(E.hasContent){c.scanActivate=!1;const y=c.extractClassId(E.content),J=(new Date).toLocaleDateString(),F=new Date,K=F.getHours(),X=F.getMinutes(),se=F.getSeconds();null!==y?c.djangoApi.putAsisA({id:y,idAlumno:c.id,asis:1,fecha:J,hora:`${K}:${X}:${se}`}).subscribe(t=>{alert(t.mensaje)},t=>{400===t.status?(c.mensaje="El usuario no es de esta seccion",alert(c.mensaje)):500===t.status&&(c.mensaje="Error interno del servidor",alert(c.mensaje))}):alert("El formato del c\xf3digo QR no contiene un ID v\xe1lido.")}else alert("NO DATA FOUND!")}else alert("NOT ALLOWED!")})()}stopScanner(){C.startScan(),this.scanActivate=!1}ionViewWillLeave(){C.stopScan(),this.scanActivate=!1}extractClassId(c){const P=c.match(/id:\s*(ASY\d{4}-\d{3}[A-Za-z])/);return P?P[1]:null}}return(l=S).\u0275fac=function(c){return new(c||l)(s.Y36(U.F0),s.Y36(G.a))},l.\u0275cmp=s.Xpm({type:l,selectors:[["app-scannerqr"]],decls:23,vars:6,consts:[[1,"head","back-button"],["mat-icon-button","","aria-label","Example icon button with a home icon","routerLink","/home"],[1,"white-icon"],[1,"header"],[1,"ion-text-center","title"],[3,"fullscreen"],[1,"scan-button",3,"hidden"],[1,"ion-no-padding"],["expand","full","color","warning",1,"scanner-button",3,"hidden","click"],["name","qr-code-outline",2,"margin-left","10px"],[1,"footer-text"],[1,"scan-box",3,"hidden"]],template:function(c,P){1&c&&(s.TgZ(0,"ion-header")(1,"div",0)(2,"button",1)(3,"mat-icon",2),s._uU(4,"home"),s.qZA()()(),s.TgZ(5,"div",3)(6,"h1",4),s._uU(7,"C\xf3digo "),s.TgZ(8,"span"),s._uU(9,"QR"),s.qZA()()()(),s.TgZ(10,"ion-content",5)(11,"ion-row",6)(12,"ion-col",7)(13,"ion-button",8),s.NdJ("click",function(){return P.startScanner()}),s._uU(14," Escanear QR "),s._UZ(15,"ion-icon",9),s.qZA()()(),s.TgZ(16,"ion-row")(17,"div",10)(18,"ion-text"),s._uU(19," - Porfavor apunte su c\xe1mara hacia el C\xf3digo QR que desplegara su profesor "),s._UZ(20,"br"),s._uU(21," - Escanee el C\xf3digo QR, ya que de lo contrario no quedara registrado en la asistencia "),s.qZA()()(),s._UZ(22,"div",11),s.qZA()),2&c&&(s.xp6(10),s.Udp("--background",P.scanActivate?"#00000000":"#ffffff"),s.Q6J("fullscreen",!0),s.xp6(1),s.Q6J("hidden",!P.scanActivate),s.xp6(2),s.Q6J("hidden",P.scanActivate),s.xp6(9),s.Q6J("hidden",!P.scanActivate))},dependencies:[w.YG,w.wI,w.W2,w.Gu,w.gu,w.Nd,w.yW,w.YI,U.rH,q.RK,Q.Hw],styles:[".head[_ngcontent-%COMP%]{background-color:#0f2b53;padding-top:30px}.back-button[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:10px}.header[_ngcontent-%COMP%]{background-color:#0f2b53;display:flex;align-items:center;justify-content:center;padding:50px}.title[_ngcontent-%COMP%]{color:#f5bf41;padding-top:50px;font-weight:100}span[_ngcontent-%COMP%]{font-weight:700;color:#fff}.scan-button[_ngcontent-%COMP%]{margin-top:50px}.scanner-button[_ngcontent-%COMP%]{margin:5% 15%}.footer-text[_ngcontent-%COMP%]{margin-left:3%;margin-top:120px;font-size:10px;color:gray}.black-icon[_ngcontent-%COMP%]{color:#fff;background:none}.black-icon[_ngcontent-%COMP%]{fill:#000}"]}),S})()}];let oe=(()=>{var l;class S{}return(l=S).\u0275fac=function(c){return new(c||l)},l.\u0275mod=s.oAB({type:l}),l.\u0275inj=s.cJS({imports:[U.Bz.forChild(I),U.Bz]}),S})(),ie=(()=>{var l;class S{}return(l=S).\u0275fac=function(c){return new(c||l)},l.\u0275mod=s.oAB({type:l}),l.\u0275inj=s.cJS({imports:[u.ez,W.u5,w.Pc,oe,q.ot,Q.Ps]}),S})()}}]);